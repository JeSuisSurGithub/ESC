<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/index.css">
    <script src="../js/index.js"></script>
    <script src="../js/Interaction_index.js"></script>
  </head>
    <body>
      <header>
        <a href="#" class="logo">ESC</a>
        <div class="group">
          <ul class="navigation">
            <li><a onclick="emprunter()" >Emprunter</a></li>
            <li><a onclick="retour()" >Rendre</a></li>
            <li><a onclick="deconnexion()">DÃ©connection</a></li>
          </ul>
          <div class="search">
            <span class="icon">
              <ion-icon name="search-outline" class="searchBtn"></ion-icon>
              <ion-icon name="close-outline" class="closeBtn"></ion-icon>
            </span>
          </div>
        </div>
        <div class="searchBox">
          <input type="text" id="valeurs" placeholder="rechercher . . .">
        </div>

      </header>


    <div class="div_principal">
<!--     <ul>
        <li><a href="/html/connexion.html">Connexion</a></li>
        <li><a href="/html/megatest.html">megatest</a></li>
        <li><a href="/html/nfc.html">NFC</a></li>
      </ul> 
 -->
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/data.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/highcharts-more.js"></script>



  <div class="left-info">
    <h2 id="titre-gauche" style="color: white;">Emprunts en cours : </h2>

      <div class="card">
        <img src="../img/petitprince.jpg" >
        <div class="texte">
          <p><span class="titre">Titre :</span> 
            <br> Auteur:  
            <br> Genre: 
            <br> Date d'emprunt: 
            <br> Date de retour: 
            <br> 
            <br> 
          </p>
            <input class="styled" type="button" value="Rendre" style="color: white;" />
        </div>
      </div>

      <div class="card">
        <img src="../img/petitprince.jpg" >
        <div class="texte">
          <p><span class="titre">Titre :</span> 
            <br> Auteur:  
            <br> Genre: 
            <br> Date d'emprunt: 
            <br> Date de retour: 
            <br> 
            <br> 
          </p>
            <input class="styled" type="button" value="Rendre" style="color: white;" />
        </div>
      </div>

      <div class="card">
        <img src="../img/petitprince.jpg" >
        <div class="texte">
          <p><span class="titre">Titre :</span> 
            <br> Auteur:  
            <br> Genre: 
            <br> Date d'emprunt: 
            <br> Date de retour: 
            <br> 
            <br> 
          </p>
            <input class="styled" type="button" value="Rendre" style="color: white;" />
        </div>
      </div>

  </div>
<!-- 
  <input class="search" id="header-search-input" type="text" name="q" autocomplete="off" spellcheck="false" placeholder="Rechercher" style="padding-left:30px" value="">

 -->




  <div id="statistiques">
    <h2 id="titre-gauche" >Mes  Statistiques : </h2>
    
    <!-- calendrier -->
         <div class="calendar">
          <table>
            <h3></h3>
            <nav>
              <button id="prev"></button>
              <button id="next"></button>
            </nav>
          </table>
          <section>
            <ul class="days">
              <li>Dim</li>
              <li>Lun</li>
              <li>Mar</li>
              <li>Mer</li>
              <li>Jeu</li>
              <li>Ven</li>
              <li>Sam</li>
            </ul>
            <ul class="dates"></ul>
          </section>
        </div>  


    <!-- graphe -->
    <!-- <div class="body">
      <div class="skill">
        <div class="skill-name" style="font-size: 10px ;font-weight: bold;">Roman</div>
        <div class="skill-level">
          <div id="roma" class="skill-percent" ></div>
        </div>
        <div class="skill-percent-number"></div>
      </div>
      <div class="skill">
        <div class="skill-name" style="font-size: 10px;font-weight: bold;">Science-fiction</div>
        <div class="skill-level">
          <div id="scfi" class="skill-percent" ></div>
        </div>
        <div class="skill-percent-number"></div>
      </div>
      <div class="skill">
        <div class="skill-name" style="font-size: 10px;font-weight: bold;">Thiller</div>
        <div class="skill-level">
          <div id="thri" class="skill-percent" ></div>
        </div>
        <div class="skill-percent-number"></div>
      </div>
      <div class="skill">
        <div class="skill-name" style="font-size: 10px;font-weight: bold;">Policier</div>
        <div class="skill-level">
          <div id="poli" class="skill-percent"></div>
        </div>
        <div class="skill-percent-number"></div>
      </div>
      <div class="skill">
        <div class="skill-name" style="font-size: 10px;font-weight: bold;">Fantaisie</div>
        <div class="skill-level">
          <div id="fant" class="skill-percent" ></div>
        </div>
        <div class="skill-percent-number"></div>
      </div>
      <div class="skill">
        <div class="skill-name" style="font-size: 10px;font-weight: bold;">Autobiographique</div>
        <div class="skill-level">
          <div id="auto" class="skill-percent" ></div>
        </div>
        <div class="skill-percent-number"></div>
      </div>
    </div>
    -->

<script>
  const data = [{
      genre: 'Roman',
      emprunts: 1
    },
    {
      genre: 'Science-fiction',
      emprunts: 5
    },
    {
      genre: 'Thriller',
      emprunts: 2
    },
    {
      genre: 'Policier',
      emprunts: 6
    },
    {
      genre: 'Fantaisie',
      emprunts: 7
    },
    {
      genre: 'Autobiographique',
      emprunts: 2
    },

  ];

const totalEmprunts = data.reduce((total, item) => total + item.emprunts, 0);

const widthPourcentageArray = data.map(item => calculerLargeurPourcentage(item.emprunts));

const idGenreMapping = {
  'roma': 'Roman',
  'scfi': 'Science-fiction',
  'thri': 'Thriller',
  'poli': 'Policier',
  'fant': 'Fantaisie',
  'auto': 'Autobiographique',
}

function calculerLargeurPourcentage(emprunts) {
  const pourcentage = (emprunts / totalEmprunts) * 100;
  return pourcentage + '%';
}

cle = []

Object.keys(idGenreMapping).forEach(function(elt) {
  cle.push(elt);
});

for (let i = 0; i < cle.length; i++) {
  objectJavascript = document.getElementById(cle[i])
	const genreRecherche = idGenreMapping[cle[i]]
	const empruntsGenreRecherche = data.find(livre => livre.genre === genreRecherche).emprunts
  objectJavascript.style.width = calculerLargeurPourcentage(empruntsGenreRecherche)
};

</script>
</div>
</div>
</body>
</html>