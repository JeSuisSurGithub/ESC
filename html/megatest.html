<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title></title>
    <link rel="stylesheet" href="/css/main.css">
  </head>
    <body>
        <div id="sortie">

        </div>
        <script src="/js/index.js"></script>
        <script>
            (async () => {
                const sortie = document.getElementById("sortie")
                // /api_statut
                const res1 = await api_statut();
                if (res1.resultat) {
                    sortie.innerHTML += `<p>
                                            Id: ${res1.donnees.id}
                                            Email: ${res1.donnees.email}
                                            Nom: ${res1.donnees.nom}
                                            Prénom: ${res1.donnees.prenom}
                                            Date de Naissance: ${res1.donnees.date_naissance}
                                            Grade: ${res1.donnees.grade}
                                        </p>`
                } else {
                    sortie.innerHTML += `<p>
                                            Statut de connexion indisponible
                                        </p>`
                }

                // /api_livres
                const res2 = await api_livres();
                if (res2.resultat) {
                    for (let i = 0; i < res2.donnees.id.length; i++) {
                        sortie.innerHTML += `<p>
                                            Id: ${res2.donnees.id[i]}
                                            Titre: ${res2.donnees.titre[i]}
                                            Genre: ${res2.donnees.genre[i]}
                                            Date de Parution: ${res2.donnees.date_parution[i]}
                                            GUID NFC: ${res2.donnees.guid_nfc[i]}
                                        </p>`
                    }
                    console.log(recherche("rom 50", res2.donnees.titre, res2.donnees.genre, res2.donnees.date_parution))
                } else {
                    sortie.innerHTML += `<p>
                                            Livres indisponibles
                                        </p>`
                }

                const res3 = await api_hist_livre(1)
                if (res3.resultat) {
                    for (let i = 0; i < res3.donnees.id_livre.length; i++) {
                        sortie.innerHTML += `<p>
                                            Id: ${res3.donnees.id_livre[i]}
                                            Titre: ${res3.donnees.titre[i]}
                                            Genre: ${res3.donnees.genre[i]}
                                            Date de Parution: ${res3.donnees.date_parution[i]}
                                            GUID NFC: ${res3.donnees.guid_nfc[i]}
                                            ID Emprunt: ${res3.donnees.id_emprunt[i]}
                                            ID Utilisateur: ${res3.donnees.id_utilisateur[i]}
                                            Date début: ${res3.donnees.date_debut[i]}
                                            Date fin: ${res3.donnees.date_fin[i]}
                                            Rendu: ${res3.donnees.rendu[i]}
                                        </p>`
                    }
                } else {
                    sortie.innerHTML += `<p>
                                            Livres indisponibles
                                        </p>`
                }
            })();
        </script>
    </div>
  </body>
</html>
